<div class="page-header">
  <div class="container">
    <h1>Users</h1>
  </div>
</div>

<div class="container">


  <div class="row">
    <div class="col-3">
      <div class="form-group">
        <select (change)="roleChange()" class="form-control" [(ngModel)]="selectedRole">
            <option>Select role to display</option>
            <option>Student</option>
            <option>Teacher</option>
            <option>Secretary</option>
            <option>Admin</option>
        </select>
      </div>
    </div>
  </div>



  <div class="mt-1">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 demo-table">

      <!-- First Name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef> First Name </th>
        <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
      </ng-container>

      <!-- Last Name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef> Last Name </th>
        <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
      </ng-container>

      <!-- Role Column -->
      <ng-container matColumnDef="rol">
        <th mat-header-cell *matHeaderCellDef> Role </th>
        <td mat-cell *matCellDef="let element"> {{element.role}} </td>
      </ng-container>

      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>

      <!-- Address Column -->
      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef> Address </th>
        <td mat-cell *matCellDef="let element"> {{element.address}} </td>
      </ng-container>

       <!-- Phone Number Column -->
       <ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef> Phone Number </th>
        <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let element" class="action-link">
          <a [title] ="update-user" [routerLink] ="['/updateUser']" [queryParams] ="{id:element.userId}"  >Update</a> |
          <a [title] ="delete-user" [routerLink] ="['.']" [queryParams] ="{id:element.userId}" >Delete</a>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>



    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page" z->
    </mat-paginator>

  </div>
  <br><br><br>
</div>

<div class="card">
  <div class="card-body">
    <h1 class="card-title">Add User</h1>

    <div *ngIf="showError" class="alert alert-danger" role="alert">
      <div *ngFor="let err of errorMessage">
        <span>{{err}}</span>
        <br />
      </div>
    </div>

    <form [formGroup]="userForm" autocomplete="off" novalidate (ngSubmit)="Register(userForm.value)">

      <div class="form-group row">
        <label for="firstName" class="col-form-label col-sm-2">First Name:</label>
        <div class="col-md-5">
          <input type="text" id="firstName" formControlName="firstName" class="form-control" />
        </div>
      </div>


      <div class="form-group row">
        <label for="lastName" class="col-form-label col-sm-2">Last Name:</label>
        <div class="col-md-5">
          <input type="text" id="lastName" formControlName="lastName" class="form-control" />
        </div>
      </div>


      <div class="form-group row">
        <label for="email" class="col-form-label col-sm-2">Email:</label>
        <div class="col-md-5">
          <input type="email" id="email" formControlName="email" class="form-control" />
        </div>
        <div class="col-md-5">
          <em *ngIf="validateControl('email') && hasError('email', 'email')">Please provide a valid email</em>
          <em *ngIf="validateControl('email') && hasError('email', 'required')">Email is required</em>
        </div>
      </div>

      <div class="form-group row">
        <label for="role" class="col-form-label col-sm-2">Role:</label>
        <div class="col-md-5">
          <select class="form-control" id="role" for="role" formControlName="role">
            <option value="1">Student</option>
            <option value="2">Teacher</option>
            <option value="3">Secretary</option>
            <option value="4">Admin</option>
        </select>
        </div>
        <div class="col-md-5">
          <em *ngIf="validateControl('role') && hasError('role', 'required')">Please select a role</em>
        </div>
      </div>


      <div class="form-group row">
        <label for="address" class="col-form-label col-sm-2">Address:</label>
        <div class="col-md-5">
          <input type="text" id="address" formControlName="address" class="form-control" />
        </div>
      </div>


      <div class="form-group row">
        <label for="phoneNumber" class="col-form-label col-sm-2">Phone number:</label>
        <div class="col-md-5">
          <input type="tel" id="phoneNumber" formControlName="phoneNumber" class="form-control" />
        </div>
      </div>


      <div class="form-group row">
        <label for="password" class="col-form-label col-sm-2">Password:</label>
        <div class="col-md-5">
          <input type="password" id="password" formControlName="password" class="form-control" />
        </div>
        <div class="col-md-5">
          <em *ngIf="validateControl('password') && hasError('password', 'required')">Password is required</em>
        </div>
      </div>

      <br>

      <div class="form-group row">
        <div class="col-md-1">
          <button type="submit" class="btn btn-info">Register</button>
        </div>
      </div>

    </form>
  </div>
</div>


